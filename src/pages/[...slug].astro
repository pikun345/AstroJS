---
import Home from '../components/tempLets/Home.astro';
import Doc from '../components/ZetaPages/ZetaDoc.astro';
import Blog from '../components/ZetaPages/ZetaBlog.astro';
import Cont from '../components/ZetaPages/BlogContent.astro'; 

import { ContData } from '../components/DemoBackend.astro'; // Correct way to import the array
import MainLayout from '../layouts/ZetaMainLayOut.astro';
import DyLayout from '../layouts/DynamicPgLayOut.astro'; 


export async function getStaticPaths() {
  const pages = [
    { slug: "", component: Home },  
    { slug: "doc", component: Doc },       
    { slug: "blog", component: Blog },   
  ];

  // Map over ContData and add each item dynamically
  const contentPages = ContData.map((data) => ({
    slug: data.slug,
    component: Cont
  }));

  // Combine pages and contentPages into one array
  const allPages = [...pages, ...contentPages];

  const staticPaths = allPages.map(({ slug, component }) => {
    return {
      params: { slug },
      props: { component },
    };
  });

  return staticPaths;
}

const { slug } = Astro.params;
const { component: PageComponent } = Astro.props;

// Determine which layout to use
const isContentPage = slug?.startsWith("blog/content");

---
{isContentPage ? (
  <DyLayout>
    <PageComponent />
  </DyLayout>
) : (
  <MainLayout>
    <PageComponent />
  </MainLayout>
)}
