---
import "../../styles/zeta.css";
import ContentCard from "../temPlates/ContentCard.astro";
import SrickyImg from "../temPlates/SrickyImg.astro";
import GrayText from "../temPlates/grayText.astro";
import SocialMedia from "../temPlates/SocialMedia.astro";
import Realted from "../temPlates/Realted.astro";
import HyContentCard from "./HyContentCard.astro";
import BlogText from "./BlogText.astro";
import Hyscaler1StSocial from "../temPlates/Hyscaler1stSocial.astro";
import FeaturedImg from "../temPlates/FeaturedImg.astro";
import Subscribe from "../temPlates/Subscribe.astro";
import Follow from "../temPlates/follow.astro";
import AllCategory1 from "../temPlates/AllCategory.astro";
import Tag from "../temPlates/Tag.astro";

const { data, sluglist,slug, AllTag, AllCategory } = Astro.props; // here slug for current blog details slug and alldata for all blog details


const currentIndex = sluglist.findIndex((slug) => slug === data.slug);

const nextSlug = sluglist[currentIndex + 1]; //temporary setup
// const nextSlug = data.nextPost.slug; this will work when next post is not null and contain the next slug
---

<div  class="blog-section  xsm:ml-5 xsm:mr-5 h-auto" id={data.slug} data-nextSlug={nextSlug} data-all={data}>
  <div class="flex flex-col  lg:pl-40 lg:pr-40 h-full w-full sm:p-10">
      <HyContentCard data={data} slug={slug}/>



    


<!-- cbd div -->
    <div class="flex flex-row mb-40 xsm:w-full sm:w-full lg:w-full relative bg-red-500 md:transform">
      <div class="md:flex md:flex-col xsm:h-full xsm:w-full pt-3   flex flex-col lg:flex-row">
        <!-- 1st div -->
        <div class="mt-5  xsm:pt-3  h-1/3  sm:p-3   rounded-lg bg-white  sm:w-full md:mr-0 sm:mr-2">
          <div class=" md:pl-0 sm:pl-2 sm:pt-3 md:mt-3">
            <div>
              <div>
                <p class="w-auto">
                  <BlogText data={data} />
                </p>
              </div>
            </div>
            <Hyscaler1StSocial data={data} />
          </div>
        </div>
    
        <!-- 2nd div -->
         <div class="xsm:h-full md:w-full lg:w-80 lg:ml-5 xsm:mt-0 bg-violet-400 space-y-5  xsm:mb-48  sm:transform ">
          <FeaturedImg data={data} />
          <Subscribe />
          <Follow data={data} slug={slug}/>
          <AllCategory1 AllCategory2={AllCategory} />
          <Tag AllTag={AllTag} />




        
          
    
    
        </div>

      </div>
    </div>

    <div id="drawer" class="fixed top-0 right-[-100%] w-[100%] z-50 h-full  items-center bg-white shadow-lg transition-all duration-300">
      
      <div class=" bg-gray-200 h-16">
        <div class="flex flex-row">
          <div class="mr-8 ml-7">
            <button id="close-drawer" class="text-2xl"> x </button>
          </div>
          <div class="sm:truncate">
              <p class="font-semibold text-gray-700">{data.title} </p> 
               <p class="font-semibold text-sm text-gray-500">Comments </p> 
    

          </div>
          
        </div>
        

      </div>
      <div class="ml-6">
        <div class="flex items-center mb-4 mt-5">
          <h2 class="text-lg font-medium text-gray-500">Comments</h2>
        </div>
        <textarea class="w-full h-24 border p-2 ml-2 mb-4" placeholder="Your comment here"></textarea>
        <div class="flex flex-row">
          <button
          id="socialMediaButton"
          class="text-white ml-2 h-8 w-[7%] rounded-md bg-blue-600 flex items-center"
        >
          <span class="px-2 py-2">Sign In</span>
          <span class="px-2 py-2 flex border-l border-white items-center">â–¼</span>
        </button>
        <!-- Modal -->
        <div
  id="drmodal"
  class="fixed inset-0  bg-opacity-30 hidden items-center justify-center">
  <div class="bg-white rounded-md shadow-lg p-2 w-80 md:transform md:translate-x-[152%] md:translate-y-72">
    <h2 class="text-gray-700 text-center font-semibold mb-4">Use Social Network</h2>
    <div class="flex justify-center space-x-6">
      <button class="p-3 bg-white rounded-full shadow-md hover:bg-gray-200">
        <img src="https://img.icons8.com/color/48/google-logo.png" alt="Google" />
      </button>
      <button class="p-3 bg-white rounded-full shadow-md hover:bg-gray-200">
        <img src="https://img.icons8.com/ios-filled/50/github.png" alt="GitHub" />
      </button>
      <button class="p-3 bg-white rounded-full shadow-md hover:bg-gray-200">
        <img src="https://img.icons8.com/color/48/windows-logo.png" alt="Microsoft" />
      </button>
    </div>
  </div>
</div>

  

          <div class="flex transform translate-x-[250%] flex-row translate-y-16">
            <div class="flex flex-row">
              <p class="w-16 flex items-center justify-center">sort by</p>
              <div class="font-semibold flex items-center justify-center w-auto">
                <select
              id="sort"
              class="h-auto w-auto  p-0  focus:outline-none focus:ring-2 border-none hover:ring-blue-600"
            
            >
              <option>Recently updated</option>
              <option>Best</option>
              <option>Worst</option>
              <option>Newest</option>
              <option>Oldest</option>
              <option>Least recently updated</option>
              <option>Most controversial</option>
              <option>Least controversial</option>
            </select>

              </div>
              

            </div>
           


          </div>
        </div>

      
      </div>
        
      </div>
     
      
    </div>

      <!-- Modal Structure -->
  <!-- <div id="modal" class="h-full w-full bg-white z-50"> -->

    <div  id="modal" class="fixed inset-0 bg-opacity-75 hidden md:w-[50%] md:transform z-50   md:h-64 md:left-1/4 top-20 ">
      <div class="bg-white p-2 rounded-lg sm:flex-col md:flex-row relative flex">
        
        <!-- Image Section -->
        
        <div class="md:w-1/3 sm:w-2/2">
          <img src="https://assets.hyscaler.com/wp-content/uploads-webpc/uploads/2024/01/newsletter-subscribe-2.png.webp" alt="AI Image" class="md:w-full md:h-full sm:w-full sm:h-60 ">
        </div>
        
        <div class="md:w-1/2 md:p-5 sm:w-2/2">
          <button id="close-modal" class="absolute top-2 right-2 mr-4 text-lg text-gray-500 hover:text-gray-700">x</button>
          
          <h2 class="font-bold text-3xl mb-1 text-left">Get the AI Edge</h2>
          <p class="text-left font-thin text-3xl mb-1">Subscribe to HyScaler's AI Newsletter Now!</p>
          <p class="text-left font-extralight text-2xl mb-4">Be the first to get the latest AI updates</p>
          
          <form action="/submit" class="space-y-4">
            <input type="text" name="name" placeholder="Name (Optional)" class="w-full border p-2 rounded-md">
            <input type="email" name="email" placeholder="Email" class="w-full border p-2 rounded-md" required>
            
            <div class="flex items-center">
              <input type="checkbox" id="robot-check" class="mr-2" required>
              <label for="robot-check">I'm not a robot</label>
            </div>
            <div class="flex items-center justify-center">
              <button type="submit" class=" border border-blue-300 text-blue-300 text-xl font-bold hover:bg-blue-200  focus:ring-blue-300 rounded-lg px-5 py-2.5 text-center me-2 mb-2 dark:border-blue-500 dark:text-blue-500 dark:hover:text-white dark:hover:bg-blue-500 dark:focus:ring-blue-800 w-1/2">Subscribe</button>
  
  
            </div>
    
          </form>
        </div>
      </div>
  
  
    </div>
  
  
    <!-- </div> -->

    

  </div>


<!-- nxt post -->
<div id="nextpost" class="sm:hidden md:block lg:block xl:block 2xl:block">
</div>


</div>




<!-- to load more post -->
<script src="../../../public/scripts/content/inf.ts"></script>

<!-- for drawer -->
 
<script>
  const commentButton:any = document.getElementById('comment-btn');
  const commentButton2:any = document.getElementById('comment-btn2');

 const drawer:any= document.getElementById('drawer');
 const closeButton:any= document.getElementById('close-drawer');
 
 // Open the drawer
 commentButton.addEventListener('click', () => {
   drawer.style.right = '-30%';
 });
 commentButton2.addEventListener('click', () => {
   drawer.style.right = '-30%';
 });
 
 
 // Close the drawer
 closeButton.addEventListener('click', () => {
   drawer.style.right = '-100%';
 });

 closeButton.addEventListener('click', () => {
   drawer.style.right = '-100%';
 });
 </script>

 <!-- drawer modal -->

 <script>
  const socialMediaButton :any= document.getElementById("socialMediaButton");
  const modal :any= document.getElementById("drmodal");

  // Open modal when clicking the Sign In button
  socialMediaButton.addEventListener("click", () => {
    modal.classList.remove("hidden");
  });

  // Close modal when clicking outside of it
  modal.addEventListener("click", (event) => {
    if (event.target === modal) {
      modal.classList.add("hidden");
    }
  });
</script>


